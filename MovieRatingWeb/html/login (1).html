<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="poppin.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        .main-container{
            height: 100vh;
            background-image: linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.7)),url('https://images.pexels.com/photos/6328938/pexels-photo-6328938.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
        }
        .form{
            background-color: rgba(245, 245, 245, 0.904);
        }
        .submit-btn{
            background-color: rgba(127, 39, 161, 0.7);
            color: white;
        }
        .submit-btn:hover{
            background-color: rgba(127, 39, 161, 0.7);
            color: white;
        }
        .btn-bg{
            background-color: rgba(127, 39, 161, 0.7) !important;
            
        }
        .check-shadow{
            box-shadow: none !important;
            border: none;
        }
        .heading{
            color: rgb(141, 51, 189);
            text-align: center;
            letter-spacing: 1.5px;
        }
        .left{
            position: absolute;
            left: -100%;
            visibility: hidden;
        }
    </style>
</head>
<body>
    <div class="container-fluid main-container">
        <div class="row justify-content-center h-100 align-items-center position-relative" >
           
           <div class="col-md-5 col-lg-4  col-11  form p-4  " id="login-form">
            <form action="">
            <div class="position-relative">
                <a href="../home.html" class="position-absolute end-0" title="home page" style="font-size: 25px;"><i class="bi bi-x"></i></a>
            </div>
            <h1 class="heading">LOGIN</h1>            
            <div class="mb-3">
                <div id="msg"></div>
                <label for="uname" class="form-label">Uname</label>
                <input type="text" class="form-control" id="uname" placeholder="Enter Uname" required pattern="[A-Za-z]{5,} ">
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Enter Password" required pattern="[A-Za-z0-9]{6,} ">
              </div>    
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="Check">
                <label class="form-check-label check-shadow" for="Check">
                  Remember me
                </label>
              </div> 
           
            <a class="btn w-100 submit-btn" id="login-submit" href="#">Sign in</a>
            <div class="py-3">
                Don't have an account<a href="#" class="ms-2" id="reg-link">Register here</a>
            </div>
            </form>
           </div>
        
           <div class="col-md-5 col-lg-4  col-11  form p-4 left" id="register-form">
            <form action="" id="reg-form">
            <div class="position-relative">
                <a href="../home.html" class="position-absolute end-0" title="home page" style="font-size: 25px;"><i class="bi bi-x"></i></a>
            </div>
            <h1 class="heading">Register</h1>
            <div id="regmsg"></div>
            <div class="mb-3">
                <label for="eg-uname" class="form-label">Uname</label>
                <input type="text" class="form-control" id="reg-uname" placeholder="Enter Uname" required >
                <p style="font-size: 10px;" class="pt-1 ps-1">Required more than 5</p>
              </div>
              <div class="mb-3">
                <label for="reg-password" class="form-label">Password</label>
                <input type="password" class="form-control" id="reg-password" placeholder="Enter Password" required>
                <p style="font-size: 10px;" class="pt-1 ps-1">use letter and number more than 6</p>
              </div>
              <div class="mb-3">
                <label for="re-password" class="form-label">Re-Password</label>
                <input type="password" class="form-control" id="re-password" placeholder="Enter Re-Password" required>
              </div>    
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="reg-check" required>
                <label class="form-check-label check-shadow" for="reg-check">
                  Remember me
                </label>
              </div> 
           
            <button type="submit" class="btn w-100 submit-btn" id="reg-submit">Sign in</button>
            <div class="py-3">
                Have an account<a href="#" class="ms-2" id="login-link">Login here</a>
            </div>
        </form>
           </div>
        </div>
    </div>
    <script>
        let loginLink=document.getElementById('login-link');
        let regLink=document.getElementById('reg-link');
        let regForm=document.getElementById('register-form');
        let loginForm=document.getElementById('login-form');
        let loginSubmit = document.getElementById('login-submit');        
        let Msg = document.getElementById('msg');



        let regform = document.getElementById('reg-form');
        let regSubmit = document.getElementById('reg-submit');
        let reguname=document.getElementById('reg-uname');
        let regpass=document.getElementById('reg-password');
        let repass=document.getElementById('re-password');
        let regcheck=document.getElementById('reg-check');
        let regmsg=document.getElementById('regmsg');

        loginLink.addEventListener('click',()=>{
            loginForm.classList.remove('left');
            regForm.classList.add('left');
        })
        regLink.addEventListener('click',()=>{
            loginForm.classList.add('left');
            regForm.classList.remove('left')
        })
        

        let loginuname=document.getElementById('uname');
        let loginpass=document.getElementById('password');
        let logincheck=document.getElementById('Check');
        loginSubmit.addEventListener('click',(e)=>{
            e.preventDefault()
            if(loginuname.value != '' && loginpass.value != '' && logincheck.checked == true){
                if(Iscorrectuser()){
                    sessionStorage.setItem('isLogin',true);
                    sessionStorage.setItem('loginUser',loginuname.value)
                    window.location.href = '../home.html'
                }
               else{
                Msg.innerHTML='<p class="text-danger bg-danger-subtle px-3 py-2">Username or Password is wrong</p>'
               }
            }
            else{
                Msg.innerHTML='<p class="text-danger bg-danger-subtle px-3 py-2">Please Fill all fields</p>'
            }
        })
        function Iscorrectuser() {
            let allUser = JSON.parse(localStorage.getItem('UserDetails'));
            let status = false;
            
            allUser.forEach(e => {
                console.log(e.uname,e.password,loginuname.value,loginpass.value)
                if(e.uname == loginuname.value && e.password == loginpass.value )
                {
                    status = true
                }
            });
            return status
            
        }
       
        regSubmit.addEventListener('click',(e)=>{
           
            if(regform.checkValidity()){
                e.preventDefault()
               
                if(regpass.value == repass.value){
                    let newData = {
                        uname : reguname.value,
                        password : regpass.value,

                    }
                    let existData = localStorage.getItem('UserDetails') ? JSON.parse(localStorage.getItem('UserDetails')) : [];
                    existData.push(newData);
                    localStorage.setItem('UserDetails',JSON.stringify(existData));
                    sessionStorage.setItem('isLogin',true)
                    sessionStorage.setItem('loginUser',reguname.value)
                    window.location.href = '../home.html'
                }
                else{
                    regmsg.innerHTML = '<p class="p-2 text-danger bg-danger-subtle">Password and Re-Password not match</p>'
                }
            }
            })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>